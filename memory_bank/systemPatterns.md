# 系统模式 - SnapLock

## 架构模式
- **前后端分离**：前端使用 Vue 3 + TypeScript，后端使用 Rust。
- **事件驱动**：通过全局输入事件监听触发锁屏与拍照。
- **插件式功能扩展**：摄像头处理、热键监听、系统托盘等功能模块化实现。

## 核心模块
1. **输入监控模块**
   - 基于 `rdev` crate 实现全局键鼠事件监听。
   - 事件触发后调用锁屏与拍照模块。

2. **锁屏模块**
   - Windows 平台调用 `rundll32.exe user32.dll,LockWorkStation`。
   - 未来可扩展至 macOS 与 Linux。

3. **摄像头模块**
   - 基于 `nokhwa` crate 实现摄像头枚举与拍照。
   - 支持用户选择摄像头设备。

4. **热键控制模块**
   - 全局监听 `ALT+L` 作为监控模式开关。
   - 延迟 2 秒进入警戒状态，避免误触发。

5. **系统托盘模块**
   - 使用 Tauri 系统托盘 API 实现最小化与后台运行。
   - 提供状态切换与退出选项。

## 数据流
- **事件流**：输入事件 → 事件处理器 → 锁屏 & 拍照 → 文件保存至桌面。
- **状态流**：热键切换监控状态 → 更新系统托盘图标与菜单。

## 安全策略
- 所有敏感操作（锁屏、拍照）均在本地执行，不上传数据。
- 摄像头访问需用户授权。